!function(e,t,n,i){t.addEventListener("dragover",function(e){(e=e||event).preventDefault()},!1),t.addEventListener("drop",function(e){(e=e||event).preventDefault()},!1);const a=(e,t,n)=>{if(e.length<2&&"*"===e[0])return!0;for(let i=1;i<e.length;i+=3){if("*"===e[i+1]&&-1!=t.search(new RegExp(e[i])))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp("\\*"+e[i+1]+"\\*")))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp(e[i+1])))return!0;if(""===e[i+1]&&(-1!=t.search(new RegExp(e[i]))||-1!=n.search(new RegExp(e[i]))))return!0}return!1};e.fn.imageuploadify=function(n){const i=e.extend({},e.fn.imageuploadify.defaults,n);return this.each(function(){const n=this;if(!e(n).attr("multiple"))return;let o=e(n).attr("accept")?e(n).attr("accept").replace(/\s/g,"").split(","):null,s=[];o.forEach(e=>{let t;const n=(t=-1!=e.search(/\//)?new RegExp("([A-Za-z-.]*)/([A-Za-z-*.]*)","g"):new RegExp(".([A-Za-z-]*)()","g")).exec(e);s=s.concat(n)});let r=[],l=0,c=e(`\n      <div class="imageuploadify well">\n        <div class="imageuploadify-overlay">\n        <i class="fa fa-picture-o"></i>\n        </div>\n        <div class="imageuploadify-images-list text-center">\n          <i class="fa fa-cloud-upload"></i>\n          <span class='imageuploadify-message'>${i.uploadMessage}</span>\n          <button type="button" class="btn btn-default">${i.uploadBtnMessage}</button>\n          <div class="imageuploadify-preview-container"></div>\n        </div>\n      </div>\n      `),f=c.find(".imageuploadify-overlay"),p=(c.find(".imageuploadify-overlay i"),c.find(".imageuploadify-preview-container")),u=c.find(".imageuploadify-images-list i"),d=c.find(".imageuploadify-images-list span"),g=c.find(".imageuploadify-images-list button");const m=e=>{for(let t=0;t<e.length;++t)if(!o||a(s,e[t].type,/(?:\.([^.]+))?$/.exec(e[t].name)[1])){const n=Math.random().toString(36).substr(2,9);v(n,e[t]),r.push({id:n,file:e[t]})}},v=(t,n)=>{const a=new FileReader,o=c.width(),s=Math.floor(o/100),l=Math.floor((o-100*s)/(s+1)),f=n.name.length>20?n.name.substr(0,20)+"â€¦":n.name,u=function(e,t){if(0===e)return"0 B";const n=(t=void 0!==t?t:2)<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["B","kB","MB","GB"][i]}(n.size),d=i.extraFields.replace("{fileName}",n.name);let g=e(`\n        <div class="imageuploadify-preview-frame">\n          <div class="imageuploadify-preview-content"></div>\n          <div class="imageuploadify-preview-footer">\n              <div class="text-muted">\n                  <samp>\n                    ${f}<br/>\n                    ${u}\n                  </samp>\n              </div>\n\n              ${d}\n                 \n              <div class="imageuploadify-actions">\n                  <button type="button" class="btn btn-link btn-remover">\n                      <i class="fa fa-trash"></i>\n                  </button>\n                  <div class="clearfix"></div>\n              </div>\n          </div>\n        </div>\n        `),m=g.find(".imageuploadify-details"),v=g.find("button"),h=g.find(".imageuploadify-preview-content");if(g.css("margin-left",l+"px"),m.hover(function(){e(this).css("opacity","1")}).mouseleave(function(){e(this).css("opacity","0")}),n.type&&-1!=n.type.search(/image/))a.onloadend=function(t){let n=e("<img>");n.attr("src",t.target.result),h.append(n),p.append(g),i.afterImageAdd()};else if(n.type){let t="<i class='fa fa-file'></i>";-1!=n.type.search(/audio/)?t="<i class='fa fa-file-audio-o'></i>":-1!=n.type.search(/video/)&&(t="<i class='fa fa-file-video-o'></i>"),a.onloadend=function(n){let a=e("<span>"+t+"</span>");a.css("font-size","5em"),g.append(a),p.append(g),i.afterImageAdd()}}v.on("click",function(){e(this).closest(".imageuploadify-preview-frame").remove();for(let e=0;r.length>e;++e)if(r[e].id===t){r.splice(e,1);break}}),a.readAsDataURL(n)},h=()=>{f.css("display","none"),c.css("border-color","rgb(210, 210, 210)"),g.css("pointer-events","initial"),d.css("pointer-events","initial"),u.css("pointer-events","initial"),p.css("pointer-events","initial")};g.mouseenter(function(e){g.css("background","#3AA0FF").css("color","white")}).mouseleave(function(){g.css("background","white").css("color","#3AA0FF")}),g.on("click",function(t){t.stopPropagation(),t.preventDefault(),e(n).click()}),c.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),l++,f.css("display","flex"),c.css("border-color","#3AA0FF"),g.css("pointer-events","none"),d.css("pointer-events","none"),u.css("pointer-events","none"),p.css("pointer-events","none")}),c.on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),0===--l&&h()}),c.on("drop",function(e){e.stopPropagation(),e.preventDefault(),h();const t=e.originalEvent.dataTransfer.files;m(t)}),e(t).bind("resize",function(n){t.resizeEvt,e(t).resize(function(){clearTimeout(t.resizeEvt),t.resizeEvt=setTimeout(function(){const t=c.width(),n=Math.floor(t/100),i=Math.floor((t-100*n)/(n+1));let a=p.find(".imageuploadify-preview-container");for(let t=0;t<a.length;++t)e(a[t]).css("margin-right","0px"),e(a[t]).css("margin-left",i+"px")},500)})}),e(n).on("change",function(){const e=this.files;m(e)}),e(n).closest("form").on("submit",function(a){a.stopPropagation(),a.preventDefault(a);const o=this.querySelectorAll("input, textarea, select, button"),s=new FormData;for(let e=0;e<o.length;++e)if("SELECT"===o[e].tagName&&o[e].hasAttribute("multiple")){const t=o[e].options;for(let n=0;t.length>n;++n)t[n].selected&&s.append(o[e].getAttribute("name"),t[n].value)}else(!o[e].getAttribute("type")||"checkbox"!==o[e].getAttribute("type").toLowerCase()&&"radio"!==o[e].getAttribute("type").toLowerCase()||o[e].checked)&&s.append(o[e].name,o[e].value);for(var l=0;l<r.length;l++)s.append(n.name,r[l].file);var c=new XMLHttpRequest;return c.onreadystatechange=function(e){c.readyState===XMLHttpRequest.DONE&&(i.afterSubmit(),200==c.status?t.location.replace(c.responseURL):c.status>=400&&c.status<=599&&i.onError())},c.open("POST",e(this).attr("action"),!0),!1!==i.beforeSubmit()&&(c.send(s),!1)}),e(n).hide(),c.insertAfter(this)}),this},e.fn.imageuploadify.defaults={uploadMessage:"Drag & Drop Your File(s) Here To Upload",uploadBtnMessage:"or select file to upload",extraFields:"",afterImageAdd:function(){},beforeSubmit:function(){},afterSubmit:function(){},onError:function(){}}}(jQuery,window,document);