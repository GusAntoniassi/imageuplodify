!function(e,t,n,i){t.addEventListener("dragover",function(e){(e=e||event).preventDefault()},!1),t.addEventListener("drop",function(e){(e=e||event).preventDefault()},!1);const a=(e,t,n)=>{if(e.length<2&&"*"===e[0])return!0;for(let i=1;i<e.length;i+=3){if("*"===e[i+1]&&-1!=t.search(new RegExp(e[i])))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp("\\*"+e[i+1]+"\\*")))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp(e[i+1])))return!0;if(""===e[i+1]&&(-1!=t.search(new RegExp(e[i]))||-1!=n.search(new RegExp(e[i]))))return!0}return!1};e.fn.imageuploadify=function(n){const i=e.extend({},e.fn.imageuploadify.defaults,n);return this.each(function(){const n=this;if(!e(n).attr("multiple"))return;let o=e(n).attr("accept")?e(n).attr("accept").replace(/\s/g,"").split(","):null,s=[];o.forEach(e=>{let t;const n=(t=-1!=e.search(/\//)?new RegExp("([A-Za-z-.]*)/([A-Za-z-*.]*)","g"):new RegExp(".([A-Za-z-]*)()","g")).exec(e);s=s.concat(n)});let r=[],l=0,c=e(`\n      <div class="imageuploadify well">\n        <div class="imageuploadify-overlay">\n        <i class="fa fa-picture-o"></i>\n        </div>\n        <div class="imageuploadify-images-list text-center">\n          <i class="fa fa-cloud-upload"></i>\n          <span class='imageuploadify-message'>${i.uploadMessage}</span>\n          <button type="button" class="btn btn-default">${i.uploadBtnMessage}</button>\n          <div class="imageuploadify-preview-container"></div>\n        </div>\n      </div>\n      `),p=c.find(".imageuploadify-overlay"),f=(c.find(".imageuploadify-overlay i"),c.find(".imageuploadify-preview-container")),d=c.find(".imageuploadify-images-list i"),u=c.find(".imageuploadify-images-list span"),g=c.find(".imageuploadify-images-list button");const v=e=>{for(let t=0;t<e.length;++t)if(!o||a(s,e[t].type,/(?:\.([^.]+))?$/.exec(e[t].name)[1])){const n=Math.random().toString(36).substr(2,9);m(n,e[t]),r.push({id:n,file:e[t]})}},m=(t,n)=>{const a=new FileReader,o=c.width(),s=Math.floor(o/100),l=Math.floor((o-100*s)/(s+1)),p=n.name.length>20?n.name.substr(0,20)+"â€¦":n.name,d=function(e,t){if(0===e)return"0 B";const n=(t=void 0!==t?t:2)<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["B","kB","MB","GB"][i]}(n.size),u=i.extraFields.replace("{fileName}",n.name);let g=e(`\n        <div class="imageuploadify-preview-frame">\n          <div class="imageuploadify-preview-content"></div>\n          <div class="imageuploadify-preview-footer">\n              <div class="text-muted">\n                  <samp>\n                    ${p}<br/>\n                    ${d}\n                  </samp>\n              </div>\n\n              ${u}\n                 \n              <div class="imageuploadify-actions">\n                  <button type="button" class="btn btn-link btn-remover">\n                      ðŸ—‘<i class="icon-bin"></i>\n                  </button>\n                  <div class="clearfix"></div>\n              </div>\n          </div>\n        </div>\n        `),v=g.find(".imageuploadify-details"),m=g.find("button"),h=g.find(".imageuploadify-preview-content");if(g.css("margin-left",l+"px"),v.hover(function(){e(this).css("opacity","1")}).mouseleave(function(){e(this).css("opacity","0")}),n.type&&-1!=n.type.search(/image/))a.onloadend=function(t){let n=e("<img>");n.attr("src",t.target.result),h.append(n),f.append(g)};else if(n.type){let t="<i class='fa fa-file'></i>";-1!=n.type.search(/audio/)?t="<i class='fa fa-file-audio-o'></i>":-1!=n.type.search(/video/)&&(t="<i class='fa fa-file-video-o'></i>"),a.onloadend=function(n){let i=e("<span>"+t+"</span>");i.css("font-size","5em"),g.append(i),f.append(g)}}m.on("click",function(){e(this).closest(".imageuploadify-preview-frame").remove();for(let e=0;r.length>e;++e)if(r[e].id===t){r.splice(e,1);break}}),a.readAsDataURL(n)},h=()=>{p.css("display","none"),c.css("border-color","rgb(210, 210, 210)"),g.css("pointer-events","initial"),u.css("pointer-events","initial"),d.css("pointer-events","initial"),f.css("pointer-events","initial")};g.mouseenter(function(e){g.css("background","#3AA0FF").css("color","white")}).mouseleave(function(){g.css("background","white").css("color","#3AA0FF")}),g.on("click",function(t){t.stopPropagation(),t.preventDefault(),e(n).click()}),c.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),l++,p.css("display","flex"),c.css("border-color","#3AA0FF"),g.css("pointer-events","none"),u.css("pointer-events","none"),d.css("pointer-events","none"),f.css("pointer-events","none")}),c.on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),0===--l&&h()}),c.on("drop",function(e){e.stopPropagation(),e.preventDefault(),h();const t=e.originalEvent.dataTransfer.files;v(t)}),e(t).bind("resize",function(n){t.resizeEvt,e(t).resize(function(){clearTimeout(t.resizeEvt),t.resizeEvt=setTimeout(function(){const t=c.width(),n=Math.floor(t/100),i=Math.floor((t-100*n)/(n+1));let a=f.find(".imageuploadify-preview-container");for(let t=0;t<a.length;++t)e(a[t]).css("margin-right","0px"),e(a[t]).css("margin-left",i+"px")},500)})}),e(n).on("change",function(){const e=this.files;v(e)}),e(n).closest("form").on("submit",function(i){i.stopPropagation(),i.preventDefault(i);const a=this.querySelectorAll("input, textarea, select, button"),o=new FormData;for(let t=0;t<a.length;++t)if("SELECT"===a[t].tagName&&a[t].hasAttribute("multiple")){const e=a[t].options;for(let n=0;e.length>n;++n)e[n].selected&&o.append(a[t].getAttribute("name"),e[n].value)}else!a[t].getAttribute("type")||"checkbox"!==a[t].getAttribute("type").toLowerCase()&&"radio"!==a[t].getAttribute("type").toLowerCase()||a[t].checked?o.append(a[t].name,a[t].value):"file"!=e(a[t]).getAttribute("type")&&o.append(a[t].name,a[t].value);for(var s=0;s<r.length;s++)o.append(n.name,r[s].file);var l=new XMLHttpRequest;return l.onreadystatechange=function(e){200==l.status&&l.readyState===XMLHttpRequest.DONE&&t.location.replace(l.responseURL)},l.open("POST",e(this).attr("action"),!0),l.send(o),!1}),e(n).hide(),c.insertAfter(this)}),this},e.fn.imageuploadify.defaults={uploadMessage:"Drag & Drop Your File(s) Here To Upload",uploadBtnMessage:"or select file to upload",extraFields:""}}(jQuery,window,document);